# Настройка защиты от ботов

## Переменные окружения

Создайте файл `.env.local` в корне проекта со следующими переменными:

```env
# API Configuration
API_URL=https://console.rpa-russia.ru
API_TOKEN=your_api_token_here

# reCAPTCHA Configuration
NEXT_PUBLIC_RECAPTCHA_SITE_KEY=your_recaptcha_site_key_here
RECAPTCHA_SECRET_KEY=your_recaptcha_secret_key_here

# Rate Limiting Configuration
RATE_LIMIT_MAX_REQUESTS=5
RATE_LIMIT_WINDOW_MS=900000
```

## Настройка reCAPTCHA

1. Перейдите на https://www.google.com/recaptcha/admin
2. Создайте новый сайт
3. Выберите reCAPTCHA v3
4. Добавьте домены вашего сайта
5. Скопируйте Site Key и Secret Key в переменные окружения

## Реализованные меры защиты

### 1. reCAPTCHA v3
- Невидимая проверка пользователей
- Оценка поведения пользователя (score 0.0 - 1.0)
- Минимальный score: 0.5

### 2. Honeypot поле
- Скрытое поле, которое заполняют только боты
- Если поле заполнено - форма блокируется

### 3. Rate Limiting
- Максимум 5 запросов с одного IP за 15 минут
- Автоматическая очистка старых записей

### 4. User-Agent фильтрация
- Блокировка известных ботов и скраперов
- Проверка подозрительных User-Agent

### 5. Серверная валидация
- Все данные проверяются на сервере
- API токен скрыт от клиента

## Дополнительные рекомендации

1. **Мониторинг**: Настройте логирование подозрительной активности
2. **IP блокировка**: Добавьте автоматическую блокировку IP с подозрительной активностью
3. **Email валидация**: Добавьте подтверждение email
4. **Капча**: Для критически важных форм добавьте видимую капчу
5. **Временные ограничения**: Добавьте минимальное время заполнения формы

## Тестирование

Для тестирования защиты:
1. Попробуйте отправить форму без reCAPTCHA
2. Заполните honeypot поле
3. Отправьте много запросов подряд
4. Используйте подозрительный User-Agent 